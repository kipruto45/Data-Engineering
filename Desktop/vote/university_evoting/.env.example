# University eVoting Environment Template
# For Render deployment, see RENDER_DEPLOYMENT_CHECKLIST.md

# === CORE DJANGO SETTINGS ===
SECRET_KEY=your-secret-key-here-change-in-production
DEBUG=False
DJANGO_DEBUG=False
ALLOWED_HOSTS=localhost,127.0.0.1,your-domain.com

# === DATABASE (PostgreSQL) ===
# For Render: DATABASE_URL will be auto-populated after attaching managed Postgres
# For local Docker: set POSTGRES_* vars
DATABASE_URL=postgresql://user:password@host:5432/evoting
POSTGRES_DB=evoting
POSTGRES_USER=postgres
POSTGRES_PASSWORD=secure_password_change_me
POSTGRES_HOST=db
POSTGRES_PORT=5432

# === REDIS & CELERY ===
# For Render: REDIS_URL auto-populated after attaching managed Redis
REDIS_URL=redis://:password@redis:6379/0
REDIS_PASSWORD=redis_password_change_me
CELERY_BROKER_URL=redis://:password@redis:6379/1
CELERY_RESULT_BACKEND=redis://:password@redis:6379/2

# === EMAIL CONFIGURATION ===
EMAIL_HOST=smtp.gmail.com
EMAIL_PORT=587
EMAIL_HOST_USER=your-email@gmail.com
EMAIL_HOST_PASSWORD=your-app-password
EMAIL_USE_TLS=True
DEFAULT_FROM_EMAIL=noreply@university.edu

# === SITE CONFIGURATION ===
SITE_URL=https://your-domain.com
ORGANIZATION_NAME=University Elections

# === SECURITY SETTINGS (enable in production) ===
SECURE_SSL_REDIRECT=True
SESSION_COOKIE_SECURE=True
CSRF_COOKIE_SECURE=True
SECURE_HSTS_SECONDS=31536000
SECURE_HSTS_INCLUDE_SUBDOMAINS=True
SECURE_HSTS_PRELOAD=True

# === STATIC & MEDIA FILES ===
USE_S3=False
STATIC_ROOT=/app/staticfiles
STATIC_URL=/static/
MEDIA_ROOT=/app/media
MEDIA_URL=/media/

# === AWS S3 CONFIGURATION (optional, only if USE_S3=True) ===
AWS_STORAGE_BUCKET_NAME=your-bucket-name
AWS_S3_REGION_NAME=us-east-1
AWS_S3_ACCESS_KEY_ID=your-access-key
AWS_S3_SECRET_ACCESS_KEY=your-secret-key
AWS_S3_CUSTOM_DOMAIN=your-bucket-name.s3.amazonaws.com
AWS_S3_FILE_OVERWRITE=False
AWS_QUERYSTRING_AUTH=False

# === LOGGING & MONITORING ===
LOG_LEVEL=INFO
SENTRY_DSN=  # Optional: error tracking via Sentry

# === RATE LIMITING ===
LOGIN_RATE_LIMIT=20
LOGIN_RATE_WINDOW=3600
REGISTRATION_RATE_LIMIT=10
REGISTRATION_RATE_WINDOW=3600

# === PASSWORD RESET ===
PASSWORD_RESET_CODE_TTL=120
PASSWORD_RESET_MIN_INTERVAL=60

# === ACCOUNT LOCKOUT ===
ACCOUNT_LOCKOUT_THRESHOLD=5
ACCOUNT_LOCKOUT_DURATION=900
ACCOUNT_LOCKOUT_MAX_DURATION=86400

# === CACHING ===
CACHE_DEFAULT_TIMEOUT=300

# === SESSION ===
SESSION_IDLE_TIMEOUT=1800
SESSION_COOKIE_MAX_AGE=1209600

# === API THROTTLING ===
THROTTLE_USER_RATE=200/min
THROTTLE_ANON_RATE=50/min

# === DEVELOPMENT ONLY (set False in production) ===
DEV_ALLOW_DEBUG_CODES=False
ALLOW_UNSAFE_PASSWORD_HASHING=False

# === LEGACY / BACKWARD COMPATIBILITY ===
DJANGO_SECRET_KEY=${SECRET_KEY}
ACCESS_TOKEN_SECRET=replace-with-secure-value
POSTER_USE_REKOGNITION=False
POSTER_PRESIGNED_URL_EXPIRES=604800
